description: Basic client-server edition
plugins:
  - tiddlywiki/tiddlyweb
  - tiddlywiki/filesystem
  - tiddlywiki/highlight
themes:
  - tiddlywiki/vanilla
  - tiddlywiki/snowwhite
build:
  test:
  - "--render"
  - "[[The Leaving of Madison]]"
  - "[is[tiddler]sitelink[]addsuffix[.html]]"
  - "text/plain"
  - "$:/template"

  index:
  # render non-blog posts
  - "--render"
  - "[!is[system]!is[image]!is[audio]!tag[Blog Post]]"
  - "[is[tiddler]sitelink[]addsuffix[.html]]"
  - "text/plain"
  - "$:/template"
  - "subtemplate"
  - "$:/templates/regular"

  # render tag index files
  - "--render"
  - "[!is[system]tags[]] -[[Blog Post]]"
  - "[addsuffix[.html]addprefix[tag/]]"
  - "text/plain"
  - "$:/template"
  - "subtemplate"
  - "$:/templates/tag-index"

  # render blog entries
  - "--render"
  - "[!is[system]!is[image]!is[audio]tag[Blog Post]]"
  - "[is[tiddler]sitelink[]addsuffix[.html]]"
  - "text/plain"
  - "$:/template"
  - "subtemplate"
  - "$:/templates/blog"

  # render blog rolls
  - "--render"
  - "[!is[system]tag[Blog Post]count[]divide[5]ceil[]upto[]]"
  - "[addprefix[blog/]addsuffix[.html]]"
  - "text/plain"
  - "$:/template"
  - "subtemplate"
  - "$:/templates/blog-roll"

  - "--render"
  - "0"
  - "blog.html"
  - "text/plain"
  - "$:/template"
  - "subtemplate"
  - "$:/templates/blog-roll"

  # render site index as copy of blog
  - "--render"
  - "0"
  - "home.html"
  - "text/plain"
  - "$:/template"
  - "subtemplate"
  - "$:/templates/blog-roll"

  # render blog archive
  - "--render"
  - "Archive"
  - "archive.html"
  - "text/plain"
  - "$:/template"
  - "subtemplate"
  - "$:/templates/archive"

  # render search template used by the search daemon
  - "--render"
  - "$:/search-placeholder"
  - "templates/search.html"
  - "text/plain"
  - "$:/template"

  # render the stylesheet
  - "--render"
  - "$:/style.css"
  - "css/style.css"
  - "text/plain"

  # render JS files
  - "--render"
  - "[is[system]field:type[application/javascript]prefix[$:/scripts/]]"
  - "[removeprefix[$:/scripts]addprefix[javascripts]]"
  - "text/plain"

  # RSS
  - "--render"
  - "$:/feed"
  - "feed.rss"
  - "text/plain"
